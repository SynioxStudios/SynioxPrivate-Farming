local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/SynioxStudios/ByYusufGui-Syniox/refs/heads/main/SynioxGui.txt", true))()
local displayName = game.Players.LocalPlayer.DisplayName

local window = library:AddWindow("Syniox Paid | Muscle Legends || Hƒ∞ - ".. displayName, {
    title_bar = {
        Color3.fromRGB(160, 0, 0), 
        Color3.fromRGB(40, 0, 0),  
        Color3.fromRGB(0, 0, 0)    
    }, 
    title_bar_transparency = 0.1, 
    background = {
        Color3.fromRGB(0, 0, 0), 
        Color3.fromRGB(10, 10, 10), 
        Color3.fromRGB(20, 20, 20)
    }, 
    background_transparency = 0.1, 
    main_color = Color3.fromRGB(160, 0, 0), 
    min_size = Vector2.new(450, 450), 
    can_resize = true 
})

local player = game.Players.LocalPlayer
local muscleEvent = player:WaitForChild("muscleEvent")
local rEvents = game:GetService("ReplicatedStorage"):WaitForChild("rEvents")
local rebirthsStat = player.leaderstats.Rebirths
local strengthStat = player.leaderstats.Strength
local isRunning = false
local strengthOnly = false
local startTime = tick()
local initialRebirths = rebirthsStat.Value
local initialStrength = strengthStat.Value

local function formatNumber(num)
    if num >= 1e15 then return string.format("%.2fQ", num/1e15) end
    if num >= 1e12 then return string.format("%.2fT", num/1e12) end
    if num >= 1e9 then return string.format("%.2fB", num/1e9) end
    if num >= 1e6 then return string.format("%.2fM", num/1e6) end
    if num >= 1e3 then return string.format("%.2fK", num/1e3) end
    return string.format("%.0f", num)
end

local function unequipAllPets()
    if player:FindFirstChild("petsFolder") then
        for _, folder in pairs(player.petsFolder:GetChildren()) do
            for _, pet in pairs(folder:GetChildren()) do
                rEvents.equipPetEvent:FireServer("unequipPet", pet)
            end
        end
    end
end

local function equipUniquePet(name)
    if player:FindFirstChild("petsFolder") and player.petsFolder:FindFirstChild("Unique") then
        for _, pet in pairs(player.petsFolder.Unique:GetChildren()) do
            if pet.Name == name then
                rEvents.equipPetEvent:FireServer("equipPet", pet)
                task.wait(0.01) 
            end
        end
    end
end

local RebTab = window:AddTab("Rebirth Farm")
RebTab:AddLabel("Session Stats").TextSize = 20
local timeLabel = RebTab:AddLabel("0d 0h 0m 0s - Inactive")
local paceLabel = RebTab:AddLabel("Pace: 0 / Hour | 0 / Day | 0 / Week")
local averagePaceLabel = RebTab:AddLabel("Average Pace: 0 / Hour | 0 / Day | 0 / Week")
local rebStatsLabel = RebTab:AddLabel("Rebirths: 0 | Gained: 0")
timeLabel.TextColor3 = Color3.fromRGB(255, 50, 50)

local rebStartTime = tick()
local lastRebirthTime = tick()
local lastRebirthValue = rebirthsStat.Value
local paceHistoryHour = {}
local rebirthCount = 0

local function updateRebirthStats()
    local currentTime = tick()
    local elapsed = isRunning and (currentTime - rebStartTime) or 0
    local d = math.floor(elapsed / 86400)
    local h = math.floor((elapsed % 86400) / 3600)
    local m = math.floor((elapsed % 3600) / 60)
    local s = math.floor(elapsed % 60)
    timeLabel.Text = string.format("%dd %dh %dm %ds - %s", d, h, m, s, isRunning and "Rebirthing" or "Inactive")
    timeLabel.TextColor3 = isRunning and Color3.fromRGB(50, 255, 50) or Color3.fromRGB(255, 50, 50)
    rebStatsLabel.Text = string.format("Rebirths: %s | Gained: %s", formatNumber(rebirthsStat.Value), formatNumber(rebirthsStat.Value - initialRebirthsVal))
end

local function calculatePaceOnRebirth()
    rebirthCount = rebirthCount + 1
    if rebirthCount < 2 then 
        lastRebirthTime = tick()
        lastRebirthValue = rebirthsStat.Value
        return 
    end
    local now = tick()
    local gained = rebirthsStat.Value - lastRebirthValue
    if gained > 0 then
        local avgTime = (now - lastRebirthTime) / gained
        local pHour = 3600 / avgTime
        paceLabel.Text = string.format("Pace: %s/H | %s/D | %s/W", formatNumber(pHour), formatNumber(pHour*24), formatNumber(pHour*168))
        table.insert(paceHistoryHour, pHour)
        if #paceHistoryHour > 20 then table.remove(paceHistoryHour, 1) end
        local sum = 0
        for _, v in ipairs(paceHistoryHour) do sum = sum + v end
        local avgH = sum / #paceHistoryHour
        averagePaceLabel.Text = string.format("Average Pace: %s/H | %s/D | %s/W", formatNumber(avgH), formatNumber(avgH*24), formatNumber(avgH*168))
        lastRebirthTime = now
        lastRebirthValue = rebirthsStat.Value
    end
end

rebirthsStat:GetPropertyChangedSignal("Value"):Connect(function()
    calculatePaceOnRebirth()
    updateRebirthStats()
end)

task.spawn(function()
    while true do
        updateRebirthStats()
        task.wait(1)
    end
end)

RebTab:AddSwitch("üîÑ Auto Rebirth Farm", function(bool)
    isRunning = bool
    if bool then rebStartTime = tick() end
    task.spawn(function()
        while isRunning do
            local currentReb = rebirthsStat.Value
            local cost = 10000 + (5000 * currentReb)
            unequipAllPets()
            task.wait(0.1)
            equipUniquePet("Swift Samurai")
            while isRunning and strengthStat.Value < cost do
                for i = 1, 12 do muscleEvent:FireServer("rep") end
                task.wait(0.01)
            end
            if not isRunning then break end
            unequipAllPets()
            task.wait(0.1)
            equipUniquePet("Tribal Overlord")
            local before = rebirthsStat.Value
            repeat rEvents.rebirthRemote:InvokeServer("rebirthRequest") task.wait(0.5) until rebirthsStat.Value > before or not isRunning
        end
    end)
end)

RebTab:AddButton("üèãÔ∏è‚Äç‚ôÇÔ∏è Jungle Lift", function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(-8666, 34, 2070)
        task.wait(0.5)
        local machine = findMachine("Jungle Bar Lift")
        if machine and machine:FindFirstChild("interactSeat") then
            local retryCount = 0
            repeat
                task.wait(0.2)
                pressE()
                retryCount = retryCount + 1
            until (player.Character and player.Character.Humanoid.Sit) or retryCount > 10
        end
    end
end)

RebTab:AddButton("ü¶µ Jungle Squat", function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(-8377.55, 48.71, 2864.90)
        task.wait(0.5)
        local machine = findMachine("Jungle Squat Rack") or findMachine("Squat Rack")
        if machine and machine:FindFirstChild("interactSeat") then
            local retryCount = 0
            repeat
                task.wait(0.2)
                pressE()
                retryCount = retryCount + 1
            until (player.Character and player.Character.Humanoid.Sit) or retryCount > 10
        end
    end
end)

RebTab:AddLabel("Useful Features").TextSize = 23

RebTab:AddSwitch("ü•ö Auto Eat Egg (30 Min)", function(state)
    autoEatEnabled = state
    if state then
        task.spawn(function()
            while autoEatEnabled do
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg then
                    egg.Parent = player.Character
                    pcall(function() egg:Activate() end)
                end
                task.wait(1800)
            end
        end)
    end
end)

RebTab:AddSwitch("üìå Lock Position", function(state)
    if state then
        local currentPos = player.Character.HumanoidRootPart.CFrame
        getgenv().posLock = game:GetService("RunService").Heartbeat:Connect(function()
            if player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character.HumanoidRootPart.CFrame = currentPos
            end
        end)
    else
        if getgenv().posLock then
            getgenv().posLock:Disconnect()
            getgenv().posLock = nil
        end
    end
end)

RebTab:AddLabel("üëæ Performance").TextSize = 21

RebTab:AddButton("üè¥ Full FPS Boost", function()
    local lighting = game:GetService("Lighting")
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("ParticleEmitter") or obj:IsA("PointLight") or obj:IsA("SpotLight") then
            obj:Destroy()
        end
    end
    lighting.Brightness = 0
    lighting.OutdoorAmbient = Color3.new(0, 0, 0)
    for _, v in pairs(lighting:GetChildren()) do if v:IsA("Sky") then v:Destroy() end end
end)

RebTab:AddSwitch("üëÅÔ∏è‚Äçüó®Ô∏è Hide All Frames", function(state)
    for _, obj in pairs(game:GetService("ReplicatedStorage"):GetChildren()) do
        if obj.Name:match("Frame$") then obj.Visible = not state end
    end
end)

RebTab:AddSwitch("üé∞ Auto Fortune Wheel", function(Value)
    _G.autoFortuneWheelActive = Value
    if Value then
        local function openFortuneWheel()
            while _G.autoFortuneWheelActive do
                local args = {
                    [1] = "openFortuneWheel",
                    [2] = game:GetService("ReplicatedStorage"):WaitForChild("fortuneWheelChances"):WaitForChild("Fortune Wheel")
                }
                game:GetService("ReplicatedStorage"):WaitForChild("rEvents"):WaitForChild("openFortuneWheelRemote"):InvokeServer(unpack(args))
                wait(0)
            end
        end
        coroutine.wrap(openFortuneWheel)()
    else
        _G.autoFortuneWheelActive = false
    end
end)

local FarmingTab = window:AddTab("Strength Farm")
FarmingTab:AddLabel("Strength Session Stats").TextSize = 20
local sStopwatchLabel = FarmingTab:AddLabel("0d 0h 0m 0s - Fast Rep Inactive")
local sPaceLabel = FarmingTab:AddLabel("Strength Pace: 0 / Hour | 0 / Day | 0 / Week")
local sAveragePaceLabel = FarmingTab:AddLabel("Average Strength Pace: 0 / Hour | 0 / Day | 0 / Week")
local sStatsLabel = FarmingTab:AddLabel("Strength: 0 | Gained: 0")
sStopwatchLabel.TextColor3 = Color3.fromRGB(255, 50, 50)

local repsPerTick = 23
local strengthHistory = {}

task.spawn(function()
    while true do
        local currentTime = tick()
        local currentStr = strengthStat.Value
        local gainedStr = currentStr - initialStrength
        sStatsLabel.Text = string.format("Strength: %s | Gained: %s", formatNumber(currentStr), formatNumber(gainedStr))
        
        if strengthOnly then
            local elapsed = currentTime - startTime
            local d = math.floor(elapsed / 86400)
            local h = math.floor((elapsed % 86400) / 3600)
            local m = math.floor((elapsed % 3600) / 60)
            local s = math.floor(elapsed % 60)
            sStopwatchLabel.Text = string.format("%dd %dh %dm %ds - Fast Rep Running", d, h, m, s)
            sStopwatchLabel.TextColor3 = Color3.fromRGB(50, 255, 50)
            
            table.insert(strengthHistory, {time = currentTime, value = currentStr})
            if #strengthHistory > 60 then table.remove(strengthHistory, 1) end
            
            if #strengthHistory >= 2 then
                local delta = strengthHistory[#strengthHistory].value - strengthHistory[1].value
                local tDiff = strengthHistory[#strengthHistory].time - strengthHistory[1].time
                local pSec = delta / tDiff
                sPaceLabel.Text = string.format("Strength Pace: %s/H | %s/D | %s/W", formatNumber(pSec*3600), formatNumber(pSec*86400), formatNumber(pSec*604800))
            end
            if elapsed > 0 then
                local avgS = gainedStr / elapsed
                sAveragePaceLabel.Text = string.format("Average Strength Pace: %s/H | %s/D | %s/W", formatNumber(avgS*3600), formatNumber(avgS*86400), formatNumber(avgS*604800))
            end
        else
            sStopwatchLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
            sStopwatchLabel.Text = sStopwatchLabel.Text:gsub("Running", "Stopped")
        end

        local elReb = currentTime - startTime
        local statusText = isRunning and "Rebirthing" or "Inactive"
        timeLabel.Text = string.format("%dd %dh %dm %ds - %s", math.floor(elReb/86400), math.floor((elReb%86400)/3600), math.floor((elReb%3600)/60), math.floor(elReb%60), statusText)
        timeLabel.TextColor3 = isRunning and Color3.fromRGB(50, 255, 50) or Color3.fromRGB(255, 50, 50)
        task.wait(1)
    end
end)

FarmingTab:AddTextBox("Rep Speed (Recommended: 23)", function(value)
    local num = tonumber(value)
    if num and num > 0 then repsPerTick = math.floor(num) end
end, {placeholder = "23"})

FarmingTab:AddSwitch("üí¢ Auto Strength Farm", function(state)
    strengthOnly = state
    if state then
        startTime = tick()
        task.spawn(function()
            unequipAllPets()
            task.wait(0.1)
            equipUniquePet("Swift Samurai")
            while strengthOnly do
                local startTick = tick()
                while tick() - startTick < 0.75 and strengthOnly do
                    for i = 1, repsPerTick do muscleEvent:FireServer("rep") end
                    task.wait(0.01)
                end
                local ping = game:GetService("Stats").PerformanceStats.Ping:GetValue()
                if ping >= 350 then task.wait(1) end
            end
        end)
    end
end)

FarmingTab:AddButton("üèãÔ∏è‚Äç‚ôÇÔ∏è Jungle Lift", function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(-8666, 34, 2070)
        task.wait(0.5)
        local machine = findMachine("Jungle Bar Lift")
        if machine and machine:FindFirstChild("interactSeat") then
            local retryCount = 0
            repeat
                task.wait(0.2)
                pressE()
                retryCount = retryCount + 1
            until (player.Character and player.Character.Humanoid.Sit) or retryCount > 10
        end
    end
end)

FarmingTab:AddButton("ü¶µ Jungle Squat", function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(-8377.55, 48.71, 2864.90)
        task.wait(0.5)
        local machine = findMachine("Jungle Squat Rack") or findMachine("Squat Rack")
        if machine and machine:FindFirstChild("interactSeat") then
            local retryCount = 0
            repeat
                task.wait(0.2)
                pressE()
                retryCount = retryCount + 1
            until (player.Character and player.Character.Humanoid.Sit) or retryCount > 10
        end
    end
end)

FarmingTab:AddLabel("Useful Features").TextSize = 23

FarmingTab:AddSwitch("ü•ö Auto Eat Egg (30 Min)", function(state)
    autoEatEnabled = state
    if state then
        task.spawn(function()
            while autoEatEnabled do
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg then
                    egg.Parent = player.Character
                    pcall(function() egg:Activate() end)
                end
                task.wait(1800)
            end
        end)
    end
end)

FarmingTab:AddSwitch("üìå Lock Position", function(state)
    if state then
        local currentPos = player.Character.HumanoidRootPart.CFrame
        getgenv().posLock = game:GetService("RunService").Heartbeat:Connect(function()
            if player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character.HumanoidRootPart.CFrame = currentPos
            end
        end)
    else
        if getgenv().posLock then
            getgenv().posLock:Disconnect()
            getgenv().posLock = nil
        end
    end
end)

FarmingTab:AddLabel("üëæ Performance").TextSize = 21

FarmingTab:AddButton("üè¥ Full FPS Boost", function()
    local lighting = game:GetService("Lighting")
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("ParticleEmitter") or obj:IsA("PointLight") or obj:IsA("SpotLight") then
            obj:Destroy()
        end
    end
    lighting.Brightness = 0
    lighting.OutdoorAmbient = Color3.new(0, 0, 0)
    for _, v in pairs(lighting:GetChildren()) do if v:IsA("Sky") then v:Destroy() end end
end)

FarmingTab:AddSwitch("üëÅÔ∏è‚Äçüó®Ô∏è Hide All Frames", function(state)
    for _, obj in pairs(game:GetService("ReplicatedStorage"):GetChildren()) do
        if obj.Name:match("Frame$") then obj.Visible = not state end
    end
end)

FarmingTab:AddSwitch("üé∞ Auto Fortune Wheel", function(Value)
    _G.autoFortuneWheelActive = Value
    if Value then
        local function openFortuneWheel()
            while _G.autoFortuneWheelActive do
                local args = {
                    [1] = "openFortuneWheel",
                    [2] = game:GetService("ReplicatedStorage"):WaitForChild("fortuneWheelChances"):WaitForChild("Fortune Wheel")
                }
                game:GetService("ReplicatedStorage"):WaitForChild("rEvents"):WaitForChild("openFortuneWheelRemote"):InvokeServer(unpack(args))
                wait(0)
            end
        end
        coroutine.wrap(openFortuneWheel)()
    else
        _G.autoFortuneWheelActive = false
    end
end)
