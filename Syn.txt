local Players = game:GetService("Players")
local player = Players.LocalPlayer
local VirtualInputManager = game:GetService("VirtualInputManager")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local muscleEvent = player:WaitForChild("muscleEvent")
local leaderstats = player:WaitForChild("leaderstats")
local rebirthsStat = leaderstats:WaitForChild("Rebirths")
local rEvents = ReplicatedStorage:WaitForChild("rEvents")

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/SynioxStudios/Syn-Paid-Ui/refs/heads/main/SynioxGui.txt", true))()
local displayName = player.DisplayName

local window = library:AddWindow("Syniox Paid | Muscle Legends || HI - ".. displayName, {
    title_bar = {
        Color3.fromRGB(180, 0, 255),
        Color3.fromRGB(60, 0, 100),
        Color3.fromRGB(0, 0, 0)
    }, 
    title_bar_transparency = 0.1, 
    background = {
        Color3.fromRGB(10, 5, 15),
        Color3.fromRGB(15, 10, 25),
        Color3.fromRGB(0, 0, 0)
    }, 
    background_transparency = 0.1, 
    main_color = Color3.fromRGB(104, 34, 139),
    min_size = Vector2.new(450, 350), 
    can_resize = true 
})

local RebTab = window:AddTab("Fast Rebirth")

local isRunning = false
local startTime = 0
local totalElapsed = 0
local initialRebirths = rebirthsStat.Value
local lastRebirthTime = tick()
local lastRebirthValue = rebirthsStat.Value
local rebirthCount = 0

local paceHistoryHour, paceHistoryDay, paceHistoryWeek = {}, {}, {}
local maxHistoryLength = 20

local function formatNumber(num)
    if num >= 1e15 then return string.format("%.2fQ", num/1e15) end
    if num >= 1e12 then return string.format("%.2fT", num/1e12) end
    if num >= 1e9 then return string.format("%.2fB", num/1e9) end
    if num >= 1e6 then return string.format("%.2fM", num/1e6) end
    if num >= 1e3 then return string.format("%.2fK", num/1e3) end
    return string.format("%.0f", num)
end

local function unequipAllPets()
    if player:FindFirstChild("petsFolder") then
        for _, folder in pairs(player.petsFolder:GetChildren()) do
            for _, pet in pairs(folder:GetChildren()) do
                rEvents.equipPetEvent:FireServer("unequipPet", pet)
            end
        end
    end
end

local function equipUniquePet(name)
    if player:FindFirstChild("petsFolder") and player.petsFolder:FindFirstChild("Unique") then
        for _, pet in pairs(player.petsFolder.Unique:GetChildren()) do
            if pet.Name == name then
                rEvents.equipPetEvent:FireServer("equipPet", pet)
                task.wait(0.01) 
            end
        end
    end
end

local function findMachine(machineName)
    local machine = workspace:FindFirstChild("machinesFolder") and workspace.machinesFolder:FindFirstChild(machineName)
    if not machine then
        for _, f in pairs(workspace:GetChildren()) do
            if f:IsA("Folder") and f.Name:find("machines") then
                machine = f:FindFirstChild(machineName)
                if machine then break end
            end
        end
    end
    return machine
end

local function pressE()
    VirtualInputManager:SendKeyEvent(true, "E", false, game)
    task.wait(0.05)
    VirtualInputManager:SendKeyEvent(false, "E", false, game)
end

local timeLabel = RebTab:AddLabel("0d 0h 0m 0s - Paused")
timeLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
local paceLabel = RebTab:AddLabel("Pace: 0 / Hour | 0 / Day | 0 / Week")
local averagePaceLabel = RebTab:AddLabel("Average Pace: 0 / Hour | 0 / Day | 0 / Week")
local rebirthsStatsLabel = RebTab:AddLabel("Rebirths: "..formatNumber(rebirthsStat.Value).." | Gained: 0")

local function updateUI()
    local currentTime = tick()
    local elapsed = isRunning and (currentTime - startTime + totalElapsed) or totalElapsed
    local days = math.floor(elapsed / 86400)
    local hours = math.floor((elapsed % 86400) / 3600)
    local minutes = math.floor((elapsed % 3600) / 60)
    local seconds = math.floor(elapsed % 60)
    
    timeLabel.Text = string.format("%dd %dh %dm %ds - %s", days, hours, minutes, seconds, isRunning and "Rebirthing" or "Paused")
    timeLabel.TextColor3 = isRunning and Color3.fromRGB(50, 255, 50) or Color3.fromRGB(255, 50, 50)
end

local function calculatePaceOnRebirth()
    rebirthCount = rebirthCount + 1
    if rebirthCount < 2 then
        lastRebirthTime, lastRebirthValue = tick(), rebirthsStat.Value
        return
    end
    local now = tick()
    local gained = rebirthsStat.Value - lastRebirthValue
    if gained > 0 then
        local avgTime = (now - lastRebirthTime) / gained
        local pH, pD, pW = 3600/avgTime, 86400/avgTime, 604800/avgTime
        paceLabel.Text = string.format("Pace: %s/H | %s/D | %s/W", formatNumber(pH), formatNumber(pD), formatNumber(pW))
        table.insert(paceHistoryHour, pH)
        table.insert(paceHistoryDay, pD)
        table.insert(paceHistoryWeek, pW)
        if #paceHistoryHour > maxHistoryLength then
            table.remove(paceHistoryHour, 1) table.remove(paceHistoryDay, 1) table.remove(paceHistoryWeek, 1)
        end
        local function avg(tbl)
            local s = 0 for _, v in ipairs(tbl) do s = s + v end
            return #tbl > 0 and (s / #tbl) or 0
        end
        averagePaceLabel.Text = string.format("Avg Pace: %s/H | %s/D | %s/W", formatNumber(avg(paceHistoryHour)), formatNumber(avg(paceHistoryDay)), formatNumber(avg(paceHistoryWeek)))
        lastRebirthTime, lastRebirthValue = now, rebirthsStat.Value
    end
end

RebTab:AddLabel("-------------------------")

RebTab:AddSwitch("ðŸ”„ Auto Rebirth Farm", function(state)
    isRunning = state
    if state then
        startTime = tick()
        task.spawn(function()
            while isRunning do
                local cReb = rebirthsStat.Value
                local cost = 10000 + (5000 * cReb)
                if player.ultimatesFolder:FindFirstChild("Golden Rebirth") then
                    cost = math.floor(cost * (1 - (player.ultimatesFolder["Golden Rebirth"].Value * 0.1)))
                end
                unequipAllPets()
                task.wait(0.1)
                equipUniquePet("Swift Samurai")
                while isRunning and player.leaderstats.Strength.Value < cost do
                    for i = 1, 12 do muscleEvent:FireServer("rep") end
                    task.wait(0.01)
                end
                if not isRunning then break end
                unequipAllPets()
                task.wait(0.1)
                equipUniquePet("Tribal Overlord")
                local machine = findMachine("Jungle Bar Lift")
                if machine and machine:FindFirstChild("interactSeat") then
                    player.Character.HumanoidRootPart.CFrame = machine.interactSeat.CFrame * CFrame.new(0, 3, 0)
                    local r = 0 repeat task.wait(0.2) pressE() r = r + 1 until (player.Character and player.Character.Humanoid.Sit) or r > 20 or not isRunning
                end
                local b = rebirthsStat.Value
                repeat rEvents.rebirthRemote:InvokeServer("rebirthRequest") task.wait(0.5) until rebirthsStat.Value > b or not isRunning
            end
        end)
    else
        totalElapsed = totalElapsed + (tick() - startTime)
    end
end)

rebirthsStat:GetPropertyChangedSignal("Value"):Connect(function()
    calculatePaceOnRebirth()
    rebirthsStatsLabel.Text = string.format("Rebirths: %s | Gained: %s", formatNumber(rebirthsStat.Value), formatNumber(rebirthsStat.Value - initialRebirths))
end)

task.spawn(function()
    while true do updateUI() task.wait(1) end
end)

RebTab:AddButton("ðŸ‹ï¸â€â™‚ï¸ Jungle Lift", function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(-8666, 34, 2070)
        task.wait(0.5)
        local machine = findMachine("Jungle Bar Lift")
        if machine and machine:FindFirstChild("interactSeat") then
            local retryCount = 0
            repeat
                task.wait(0.2)
                pressE()
                retryCount = retryCount + 1
            until (player.Character and player.Character.Humanoid.Sit) or retryCount > 10
        end
    end
end)

RebTab:AddButton("ðŸ´ Full FPS Boost", function()
    local lighting = game:GetService("Lighting")
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("ParticleEmitter") or obj:IsA("PointLight") or obj:IsA("SpotLight") then
            obj:Destroy()
        end
    end
    lighting.Brightness = 0
    lighting.OutdoorAmbient = Color3.new(0, 0, 0)
    for _, v in pairs(lighting:GetChildren()) do if v:IsA("Sky") then v:Destroy() end end
end)

RebTab:AddSwitch("ðŸ‘ï¸â€ðŸ—¨ï¸ Hide All Frames", function(state)
    for _, obj in pairs(game:GetService("ReplicatedStorage"):GetChildren()) do
        if obj.Name:match("Frame$") then obj.Visible = not state end
    end
end)

RebTab:AddSwitch("ðŸŽ° Auto Fortune Wheel", function(Value)
    _G.autoFortuneWheelActive = Value
    if Value then
        local function openFortuneWheel()
            while _G.autoFortuneWheelActive do
                local args = {
                    [1] = "openFortuneWheel",
                    [2] = game:GetService("ReplicatedStorage"):WaitForChild("fortuneWheelChances"):WaitForChild("Fortune Wheel")
                }
                game:GetService("ReplicatedStorage"):WaitForChild("rEvents"):WaitForChild("openFortuneWheelRemote"):InvokeServer(unpack(args))
                wait(0)
            end
        end
        coroutine.wrap(openFortuneWheel)()
    else
        _G.autoFortuneWheelActive = false
    end
end)

local StrTab = window:AddTab("Fast Strength")

local strengthStat = leaderstats:WaitForChild("Strength")
local durabilityStat = player:WaitForChild("Durability")
local runFastRep = false
local repsPerTick = 23 
local initialStrength = strengthStat.Value
local initialDurability = durabilityStat.Value
local strengthHistory = {}
local durabilityHistory = {}
local calculationInterval = 10
local strStartTime = tick()
local strTotalElapsed = 0

local function formatNumber(num)
    if num >= 1e15 then return string.format("%.2fQa", num/1e15) end
    if num >= 1e12 then return string.format("%.2fT", num/1e12) end
    if num >= 1e9 then return string.format("%.2fB", num/1e9) end
    if num >= 1e6 then return string.format("%.2fM", num/1e6) end
    if num >= 1e3 then return string.format("%.2fK", num/1e3) end
    return string.format("%.0f", num)
end

local function getPing()
    local stats = game:GetService("Stats")
    local pingStat = stats:FindFirstChild("PerformanceStats") and stats.PerformanceStats:FindFirstChild("Ping")
    return pingStat and pingStat:GetValue() or 0
end

StrTab:AddLabel("Session Stats").TextSize = 23
local strTimeLabel = StrTab:AddLabel("Time: 0d 0h 0m 0s - Paused")
strTimeLabel.TextColor3 = Color3.fromRGB(255, 50, 50)

local strengthLabel = StrTab:AddLabel("Strength: " .. formatNumber(strengthStat.Value) .. " | Gained: 0")
local sPaceLabel = StrTab:AddLabel("Strength Pace: 0/H | 0/D")
local durabilityLabel = StrTab:AddLabel("Durability: " .. formatNumber(durabilityStat.Value) .. " | Gained: 0")
local dPaceLabel = StrTab:AddLabel("Durability Pace: 0/H | 0/D")

StrTab:AddLabel("Settings").TextSize = 21

StrTab:AddTextBox("Rep Speed", function(value)
    local num = tonumber(value)
    if num and num > 0 then repsPerTick = math.floor(num) end
end, {placeholder = "VuruÅŸ: 23"})

local function fastRepLoop()
    while runFastRep do
        if getPing() < 350 then
            for i = 1, repsPerTick do
                if not runFastRep then break end
                muscleEvent:FireServer("rep")
            end
        else
            repeat task.wait(1) until getPing() < 350 or not runFastRep
        end
        task.wait(0.01)
    end
end

StrTab:AddSwitch("ðŸ’¢ Auto Strength Farm", function(state)
    runFastRep = state
    if state then
        strStartTime = tick()
        unequipAllPets()
        task.wait(0.1)
        equipUniquePet("Swift Samurai")
        task.spawn(fastRepLoop)
    else
        strTotalElapsed = strTotalElapsed + (tick() - strStartTime)
    end
end)

task.spawn(function()
    local lastCalcTime = tick()
    while true do
        local currentTime = tick()
        local elapsed = runFastRep and (currentTime - strStartTime + strTotalElapsed) or strTotalElapsed
        local days = math.floor(elapsed / 86400)
        local hours = math.floor((elapsed % 86400) / 3600)
        local minutes = math.floor((elapsed % 3600) / 60)
        local seconds = math.floor(elapsed % 60)
        
        strTimeLabel.Text = string.format("Time: %dd %dh %dm %ds - %s", days, hours, minutes, seconds, runFastRep and "Farming" or "Paused")
        strTimeLabel.TextColor3 = runFastRep and Color3.fromRGB(50, 255, 50) or Color3.fromRGB(255, 50, 50)

        local currentStr = strengthStat.Value
        local currentDur = durabilityStat.Value
        
        strengthLabel.Text = "Strength: " .. formatNumber(currentStr) .. " | Gained: " .. formatNumber(currentStr - initialStrength)
        durabilityLabel.Text = "Durability: " .. formatNumber(currentDur) .. " | Gained: " .. formatNumber(currentDur - initialDurability)

        if runFastRep then
            table.insert(strengthHistory, {time = currentTime, value = currentStr})
            table.insert(durabilityHistory, {time = currentTime, value = currentDur})
            
            while #strengthHistory > 0 and currentTime - strengthHistory[1].time > calculationInterval do table.remove(strengthHistory, 1) end
            while #durabilityHistory > 0 and currentTime - durabilityHistory[1].time > calculationInterval do table.remove(durabilityHistory, 1) end

            if currentTime - lastCalcTime >= calculationInterval then
                lastCalcTime = currentTime
                if #strengthHistory >= 2 then
                    local sDelta = strengthHistory[#strengthHistory].value - strengthHistory[1].value
                    sPaceLabel.Text = string.format("Strength Pace: %s/H | %s/D", formatNumber((sDelta/calculationInterval) * 3600), formatNumber((sDelta/calculationInterval) * 86400))
                end
                if #durabilityHistory >= 2 then
                    local dDelta = durabilityHistory[#durabilityHistory].value - durabilityHistory[1].value
                    dPaceLabel.Text = string.format("Durability Pace: %s/H | %s/D", formatNumber((dDelta/calculationInterval) * 3600), formatNumber((dDelta/calculationInterval) * 86400))
                end
            end
        end
        task.wait(0.1)
    end
end)

StrTab:AddLabel("Misc").TextSize = 21

StrTab:AddButton("ðŸ¦µ Jungle Squat", function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(-8377.55, 48.71, 2864.90)
        task.wait(0.5)
        local machine = findMachine("Jungle Squat Rack") or findMachine("Squat Rack")
        if machine and machine:FindFirstChild("interactSeat") then
            local retry = 0
            repeat task.wait(0.2); pressE(); retry = retry + 1 until (player.Character and player.Character.Humanoid.Sit) or retry > 10
        end
    end
end)

StrTab:AddSwitch("ðŸ¥š Auto Eat Egg (30 Min)", function(state)
    autoEatEnabled = state
    if state then
        task.spawn(function()
            while autoEatEnabled do
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg then
                    egg.Parent = player.Character
                    pcall(function() egg:Activate() end)
                end
                task.wait(1800)
            end
        end)
    end
end)

StrTab:AddSwitch("ðŸ“Œ Lock Position", function(state)
    if state then
        local currentPos = player.Character.HumanoidRootPart.CFrame
        getgenv().posLock = game:GetService("RunService").Heartbeat:Connect(function()
            if player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character.HumanoidRootPart.CFrame = currentPos
            end
        end)
    else
        if getgenv().posLock then
            getgenv().posLock:Disconnect()
            getgenv().posLock = nil
        end
    end
end)

StrTab:AddSwitch("ðŸ‘ï¸â€ðŸ—¨ï¸ Hide All Frames", function(state)
    for _, obj in pairs(game:GetService("ReplicatedStorage"):GetChildren()) do
        if obj.Name:match("Frame$") then obj.Visible = not state end
    end
end)

local sizeSwitch = StrTab:AddSwitch("Auto Size 2", function(bool)
    _G.autoSizeActive = bool
    
    if bool then
        spawn(function()
            while _G.autoSizeActive and wait() do
                game:GetService("ReplicatedStorage").rEvents.changeSpeedSizeRemote:InvokeServer("changeSize", 2)
            end
        end)
    end
end, "Size 2")

local Main = window:AddTab("Main")
local repsPerTick = 12

Main:AddTextBox("Rep Speed", function(value)
    local num = tonumber(value)
    if num and num > 0 then 
        repsPerTick = math.floor(num) 
    end
end, {placeholder = "Rep Amount (Default: 12)"})

_G.repToggle = false
Main:AddSwitch("ðŸ’ª Fast Auto Farm (Equip Any tool)", function(state)
    _G.repToggle = state
    task.spawn(function()
        while _G.repToggle do
            local event = game:GetService("Players").LocalPlayer:FindFirstChild("muscleEvent")
            if event then
                for i = 1, repsPerTick do
                    if not _G.repToggle then break end
                    event:FireServer("rep")
                end
            end
            task.wait(0.01)
        end
    end)
end)

local function manageTool(toolName)
    task.spawn(function()
        while _G[toolName.."On"] do
            local player = game.Players.LocalPlayer
            local character = player.Character
            
            if character then
                local tool = character:FindFirstChild(toolName) or player.Backpack:FindFirstChild(toolName)
                
                if tool then
                    if tool.Parent ~= character then
                        tool.Parent = character
                    end
                    
                    local event = player:FindFirstChild("muscleEvent")
                    if event then
                        for i = 1, repsPerTick do
                            if not _G[toolName.."On"] then break end
                            event:FireServer("rep")
                        end
                    else
                        tool:Activate()
                    end
                end
            end
            task.wait(0.01)
        end

        local player = game.Players.LocalPlayer
        local character = player.Character
        if character then
            local tool = character:FindFirstChild(toolName)
            if tool then
                tool.Parent = player.Backpack
            end
        end
    end)
end

Main:AddSwitch("ðŸ‹ï¸ Weight", function(bool)
    _G.WeightOn = bool
    if bool then manageTool("Weight") end
end)

Main:AddSwitch("ðŸ’ª Pushups", function(bool)
    _G.PushupsOn = bool
    if bool then manageTool("Pushups") end
end)

Main:AddSwitch("ðŸ¤¸ Handstands", function(bool)
    _G.HandstandsOn = bool
    if bool then manageTool("Handstands") end
end)

Main:AddSwitch("ðŸ§˜ Situps", function(bool)
    _G.SitupsOn = bool
    if bool then manageTool("Situps") end
end)

local VirtualInputManager = game:GetService("VirtualInputManager")
local Player = game.Players.LocalPlayer
local RunService = game:GetService("RunService")

local TreadmillFolder = Main:AddFolder("ðŸƒâ€â™‚ï¸ Treadmill Farm")

local TreadmillLocations = {
    ["Jungle Treadmill +8 xp"] = Vector3.new(-8131.86, 25.77, 2818.17),
    ["Legends Treadmill +7 xp"] = Vector3.new(4365.82, 997.14, -3632.9),
    ["Mythical Treadmill +6 xp"] = Vector3.new(2661.67, 19.41, 932.09),
    ["Spawn Treadmill +5 xp"] = Vector3.new(-230.43, 8.16, -102.18),
    ["Tiny Treadmill +1 xp"] = Vector3.new(55.64, 5.16, 1947.60)
}

local activeTreadmill = false
local treadmillConn = nil

local function stopTreadmill()
    activeTreadmill = false
    if treadmillConn then
        treadmillConn:Disconnect()
        treadmillConn = nil
    end
    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.W, false, game)
end

local function startTreadmill(pos)
    stopTreadmill()
    activeTreadmill = true
    
    local hrp = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.CFrame = CFrame.new(pos + Vector3.new(0, 3, 0))
        task.wait(0.3)
        local lockCF = hrp.CFrame
        treadmillConn = RunService.Heartbeat:Connect(function()
            if activeTreadmill and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
                Player.Character.HumanoidRootPart.CFrame = lockCF
                VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.W, false, game)
            end
        end)
    end
end

TreadmillFolder:AddButton("ðŸŒ¿ Start Jungle +8 xp", function()
    startTreadmill(TreadmillLocations["Jungle Treadmill +8 xp"])
end)

TreadmillFolder:AddButton("ðŸ”± Start Legends +7 xp", function()
    startTreadmill(TreadmillLocations["Legends Treadmill +7 xp"])
end)

TreadmillFolder:AddButton("âœ¨ Start Mythical +6 xp", function()
    startTreadmill(TreadmillLocations["Mythical Treadmill +6 xp"])
end)

TreadmillFolder:AddButton("ðŸ  Start Spawn +5 xp", function()
    startTreadmill(TreadmillLocations["Spawn Treadmill +5 xp"])
end)

TreadmillFolder:AddButton("ðŸ‘Ÿ Start Tiny +1 xp", function()
    startTreadmill(TreadmillLocations["Tiny Treadmill +1 xp"])
end)

TreadmillFolder:AddButton("â›” Stop Treadmill Farm", function()
    stopTreadmill()
end)

local toolFolder = Main:AddFolder(" ðŸ’¨ OP Tools V2")

local function manageToolCombo(toolName)
    task.spawn(function()
        while _G[toolName.."On"] do
            local character = LocalPlayer.Character
            local hum = character and character:FindFirstChildOfClass("Humanoid")
            
            if character and hum then
                local punch = LocalPlayer.Backpack:FindFirstChild("Punch") or character:FindFirstChild("Punch")
                local tool = LocalPlayer.Backpack:FindFirstChild(toolName) or character:FindFirstChild(toolName)

                if punch then
                    if punch.Parent ~= character then
                        hum:EquipTool(punch)
                    end
                    if punch:FindFirstChild("attackTime") then 
                        punch.attackTime.Value = 0 
                    end
                    punch:Activate()
                end

                if tool then
                    if tool.Parent ~= character then
                        hum:EquipTool(tool)
                    end
                    
                    local event = LocalPlayer:FindFirstChild("muscleEvent")
                    if event then 
                        event:FireServer("rep") 
                    end
                    tool:Activate()
                end
            end
            task.wait(0.01)
        end
    end)
end

toolFolder:AddLabel("Choose your desired rock from the Rock Location below")

toolFolder:AddSwitch("ðŸ‹ï¸ Weight + ðŸ¥Š Punch", function(bool)
    _G.WeightOn = bool
    if bool then manageToolCombo("Weight") end
end)

toolFolder:AddSwitch("ðŸ’ª Pushups + ðŸ¥Š Punch", function(bool)
    _G.PushupsOn = bool
    if bool then manageToolCombo("Pushups") end
end)

toolFolder:AddSwitch("ðŸ¤¸ Handstand + ðŸ¥Š Punch", function(bool)
    _G.HandstandOn = bool
    if bool then manageToolCombo("Handstand") end
end)

toolFolder:AddSwitch("ðŸ§˜ Situps + ðŸ¥Š Punch", function(bool)
    _G.SitupsOn = bool
    if bool then manageToolCombo("Situps") end
end)

local function gettool()
    for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
        if v.Name == "Punch" and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid") then
            game.Players.LocalPlayer.Character.Humanoid:EquipTool(v)
        end
    end
    
    local muscleEvent = game:GetService("Players").LocalPlayer.muscleEvent
    muscleEvent:FireServer("punch", "leftHand")
    muscleEvent:FireServer("punch", "rightHand")
    muscleEvent:FireServer("punch", "leftHand")
    muscleEvent:FireServer("punch", "rightHand")
end

local RockFolder = Main:AddFolder("ðŸ‘Š Rock Farm")

RockFolder:AddSwitch("ðŸ’Ž Tiny Rock 0", function(Value)
    selectrock = "Tiny Island Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 0 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 0 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

RockFolder:AddSwitch("ðŸ”¥ Starter Rock 100", function(Value)
    selectrock = "Starter Island Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 100 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 100 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

RockFolder:AddSwitch("ðŸï¸ Legend Beach Rock 5K", function(Value)
    selectrock = "Legend Beach Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 5000 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 5000 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

RockFolder:AddSwitch("â„ï¸ Frozen Rock 150K", function(Value)
    selectrock = "Frost Gym Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 150000 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 150000 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

RockFolder:AddSwitch("âœ¨ Mythical Rock 400K", function(Value)
    selectrock = "Mythical Gym Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 400000 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 400000 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

RockFolder:AddSwitch("ðŸ”¥ Eternal Rock 750K", function(Value)
    selectrock = "Eternal Gym Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 750000 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 750000 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

RockFolder:AddSwitch("ðŸ† Legend Rock 1M", function(Value)
    selectrock = "Legend Gym Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 1000000 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 1000000 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

RockFolder:AddSwitch("ðŸ‘‘ Muscle King Rock 5M", function(Value)
    selectrock = "Muscle King Gym Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 5000000 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 5000000 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

RockFolder:AddSwitch("ðŸŒ´ Jungle Rock 10M", function(Value)
    selectrock = "Ancient Jungle Rock"
    getgenv().autoFarm = Value
    task.spawn(function()
        while getgenv().autoFarm do
            task.wait(0.01)
            if not getgenv().autoFarm then break end
            if game:GetService("Players").LocalPlayer.Durability.Value >= 10000000 then
                for i, v in pairs(game:GetService("Workspace").machinesFolder:GetDescendants()) do
                    if v.Name == "neededDurability" and v.Value == 10000000 and game.Players.LocalPlayer.Character:FindFirstChild("LeftHand") and game.Players.LocalPlayer.Character:FindFirstChild("RightHand") then
                        for _ = 1, 3 do
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.RightHand, 1)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 0)
                            firetouchinterest(v.Parent.Rock, game:GetService("Players").LocalPlayer.Character.LeftHand, 1)
                        end
                        gettool()
                    end
                end
            end
        end
    end)
end)

Main:AddButton("ðŸ’Ž Gamepass AutoLift", function()
    local gamepassFolder = game:GetService("ReplicatedStorage").gamepassIds
    local player = game:GetService("Players").LocalPlayer
    for _, gamepass in pairs(gamepassFolder:GetChildren()) do
        local value = Instance.new("IntValue")
        value.Name = gamepass.Name
        value.Value = gamepass.Value
        value.Parent = player.ownedGamepasses
    end
end, "ðŸ”“ Unlock AutoLift Passe")

Main:AddSwitch("ðŸ¥š Auto Eat Egg (30 Min)", function(state)
    autoEatEnabled = state
    if state then
        task.spawn(function()
            while autoEatEnabled do
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg then
                    egg.Parent = player.Character
                    pcall(function() egg:Activate() end)
                end
                task.wait(1800)
            end
        end)
    end
end)

Main:AddSwitch("ðŸ¥š Auto Eat Egg (60 Min)", function(state)
    autoEatEnabled = state
    if state then
        task.spawn(function()
            while autoEatEnabled do
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg then
                    egg.Parent = player.Character
                    pcall(function() egg:Activate() end)
                end
                task.wait(3600)
            end
        end)
    end
end)

local rebirths = window:AddTab("Rebirths")

rebirths:AddTextBox("ðŸ”¢ Rebirth Target", function(text)
    local newValue = tonumber(text)
    if newValue and newValue > 0 then
        targetRebirthValue = newValue
        updateStats() 
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Updated Goal",
            Text = "New goal: " .. tostring(targetRebirthValue) .. " rebirths",
            Duration = 0
        })
    else
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Size",
            Text = "Put a size larger than 0",
            Duration = 0
        })
    end
end)

local infiniteSwitch

local targetSwitch = rebirths:AddSwitch("ðŸ”„ Auto Rebirth Target", function(bool)
    _G.targetRebirthActive = bool
    
    if bool then
        if _G.infiniteRebirthActive and infiniteSwitch then
            infiniteSwitch:Set(false)
            _G.infiniteRebirthActive = false
        end
        
        spawn(function()
            while _G.targetRebirthActive and wait(0.1) do
                local currentRebirths = game.Players.LocalPlayer.leaderstats.Rebirths.Value
                
                if currentRebirths >= targetRebirthValue then
                    targetSwitch:Set(false)
                    _G.targetRebirthActive = false
                    
                    game:GetService("StarterGui"):SetCore("SendNotification", {
                        Title = "Goal Reached",
                        Text = "You Have Reached" .. tostring(targetRebirthValue) .. " renacimientos",
                        Duration = 5
                    })
                    
                    break
						end
						
                game:GetService("ReplicatedStorage").rEvents.rebirthRemote:InvokeServer("rebirthRequest")
            end
        end)
    end
end, "automatic rebirth until reaching the goal")

infiniteSwitch = rebirths:AddSwitch("â™¾ï¸ Auto Rebirth (Infinitely)", function(bool)
    _G.infiniteRebirthActive = bool
    
    if bool then
        if _G.targetRebirthActive and targetSwitch then
            targetSwitch:Set(false)
            _G.targetRebirthActive = false
        end
        
        spawn(function()
            while _G.infiniteRebirthActive and wait(0.1) do
                game:GetService("ReplicatedStorage").rEvents.rebirthRemote:InvokeServer("rebirthRequest")
            end
        end)
    end
end, "rebirth infinitely")

local sizeSwitch = rebirths:AddSwitch("ðŸ“ Auto Size 2", function(bool)
    _G.autoSizeActive = bool
    
    if bool then
        spawn(function()
            while _G.autoSizeActive and wait() do
                game:GetService("ReplicatedStorage").rEvents.changeSpeedSizeRemote:InvokeServer("changeSize", 2)
            end
        end)
    end
end, "Size 2")

local teleportSwitch = rebirths:AddSwitch("ðŸ‘‘ Auto TP Muscle King", function(bool)
    _G.teleportActive = bool
    
    if bool then
        spawn(function()
            while _G.teleportActive and wait() do
                if game.Players.LocalPlayer.Character then
                    game.Players.LocalPlayer.Character:MoveTo(Vector3.new(-8748.52, 120.58, -5861.44))
                end
            end
        end)
    end
end, "Tp to Mk")

rebirths:AddSwitch("ðŸ¥š Auto Eat Egg (30 Min)", function(state)
    autoEatEnabled = state
    if state then
        task.spawn(function()
            while autoEatEnabled do
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg then
                    egg.Parent = player.Character
                    pcall(function() egg:Activate() end)
                end
                task.wait(1800)
            end
        end)
    end
end)

rebirths:AddSwitch("ðŸ¥š Auto Eat Egg (60 Min)", function(state)
    autoEatEnabled = state
    if state then
        task.spawn(function()
            while autoEatEnabled do
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg then
                    egg.Parent = player.Character
                    pcall(function() egg:Activate() end)
                end
                task.wait(3600)
            end
        end)
    end
end)

rebirths:AddSwitch("ðŸ‘ï¸â€ðŸ—¨ï¸ Hide All Frames", function(bool)
    local rSto = game:GetService("ReplicatedStorage")
    for _, obj in pairs(rSto:GetChildren()) do
        if obj.Name:match("Frame$") then
            obj.Visible = not bool
        end
    end
end)

local selectedUltimate = nil
local autoBuyActive = false
local ultimateRemote = game:GetService("ReplicatedStorage"):WaitForChild("rEvents"):WaitForChild("ultimatesRemote")

local upgradeDropdown = rebirths:AddDropdown("ðŸ“¦ Select UltÄ±mate", function(choice)
    selectedUltimate = choice
end)

local items = {
    "RepSpeed", "PetSlot", "ItemCapacity", "DailySpin", 
    "ChestRewards", "QuestRewards", "MuscleMind", "JungleSwift", 
    "InfernalHealth", "GalaxyGains", "DemonDamage", "GoldenRebirth"
}

for _, itemName in ipairs(items) do
    upgradeDropdown:Add(itemName)
end

rebirths:AddSwitch("ðŸ”„ Auto Buy Selected", function(state)
    autoBuyActive = state
    if autoBuyActive then
        task.spawn(function()
            while autoBuyActive do
                if selectedUltimate then
                    pcall(function()
                        ultimateRemote:InvokeServer("upgradeUltimate", selectedUltimate)
                    end)
                end
                task.wait(0.5)
            end
        end)
    end
end)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Killer = window:AddTab("Kill")

local playerWhitelist = {}
local targetPlayerNames = {}
local selectedFollowTarget = nil
_G.FollowToTarget = false

Killer:AddLabel("--- Misc ---")

Killer:AddSwitch("ðŸ‘€ View Player", function(bool)
    spying = bool
    if not spying then
        local cam = workspace.CurrentCamera
        cam.CameraSubject = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") or LocalPlayer
        return
    end
    task.spawn(function()
        while spying do
            local target = Players:FindFirstChild(targetPlayerName)
            if target and target ~= LocalPlayer then
                local humanoid = target.Character and target.Character:FindFirstChild("Humanoid")
                if humanoid then
                    workspace.CurrentCamera.CameraSubject = humanoid
                end
            end
            task.wait(0.1)
        end
    end)
end)

local followDropdown = Killer:AddDropdown("ðŸ‘¤ Select Follow Target", function(name)
    selectedFollowTarget = name
    _G.FollowToTarget = true
    
    task.spawn(function()
        while _G.FollowToTarget and selectedFollowTarget == name do
            local t = game.Players:FindFirstChild(selectedFollowTarget)
            local myChar = LocalPlayer.Character
            local myHRP = myChar and myChar:FindFirstChild("HumanoidRootPart")
            
            if t and t.Character and t.Character:FindFirstChild("HumanoidRootPart") and myHRP then
                myHRP.CFrame = t.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 2.5)
            end
            task.wait()
        end
    end)
end)

Killer:AddButton("â›” Stop Follow", function()
    _G.FollowToTarget = false
    selectedFollowTarget = nil
end)

local function updateFollowDropdown(p)
    if p ~= LocalPlayer then
        followDropdown:Add(p.Name)
    end
end

for _, p in ipairs(game.Players:GetPlayers()) do updateFollowDropdown(p) end
game.Players.PlayerAdded:Connect(updateFollowDropdown)

Killer:AddLabel("--------------------")
Killer:AddLabel("--- Karma Farm ---")

Killer:AddSwitch("ðŸ˜‡ Auto Good Karma", function(bool)
    _G.GoodKarma = bool
    task.spawn(function()
        while _G.GoodKarma do
            local char = LocalPlayer.Character
            local rHand = char and char:FindFirstChild("RightHand")
            if rHand then
                for _, target in ipairs(Players:GetPlayers()) do
                    if target ~= LocalPlayer then
                        local evil = target:FindFirstChild("evilKarma")
                        local good = target:FindFirstChild("goodKarma")
                        if evil and good and evil.Value > good.Value then
                            local root = target.Character and target.Character:FindFirstChild("HumanoidRootPart")
                            if root then
                                firetouchinterest(rHand, root, 1)
                                firetouchinterest(rHand, root, 0)
                            end
                        end
                    end
                end
            end
            task.wait(0.01)
        end
    end)
end)

Killer:AddSwitch("ðŸ˜ˆ Auto Bad Karma", function(bool)
    _G.BadKarma = bool
    task.spawn(function()
        while _G.BadKarma do
            local char = LocalPlayer.Character
            local rHand = char and char:FindFirstChild("RightHand")
            if rHand then
                for _, target in ipairs(Players:GetPlayers()) do
                    if target ~= LocalPlayer then
                        local evil = target:FindFirstChild("evilKarma")
                        local good = target:FindFirstChild("goodKarma")
                        if evil and good and good.Value > evil.Value then
                            local root = target.Character and target.Character:FindFirstChild("HumanoidRootPart")
                            if root then
                                firetouchinterest(rHand, root, 1)
                                firetouchinterest(rHand, root, 0)
                            end
                        end
                    end
                end
            end
            task.wait(0.01)
        end
    end)
end)

Killer:AddLabel("--------------------")
Killer:AddLabel("ðŸ¥Š Combat Tweaks")

local button = Killer:AddButton("ðŸš« Remove Punch Anim", function()
    local blockedAnimations = {
        ["rbxassetid://3638729053"] = true,
        ["rbxassetid://3638767427"] = true,
    }

    local function setupAnimationBlocking()
        local char = game.Players.LocalPlayer.Character
        if not char or not char:FindFirstChild("Humanoid") then return end

        local humanoid = char:FindFirstChild("Humanoid")

        for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
            if track.Animation then
                local animId = track.Animation.AnimationId
                local animName = track.Name:lower()

                if blockedAnimations[animId] or
                    animName:match("punch") or
                    animName:match("attack") or
                    animName:match("right") then
                    track:Stop()
                end
            end
        end

        if not _G.AnimBlockConnection then
            local connection = humanoid.AnimationPlayed:Connect(function(track)
                if track.Animation then
                    local animId = track.Animation.AnimationId
                    local animName = track.Name:lower()

                    if blockedAnimations[animId] or
                        animName:match("punch") or
                        animName:match("attack") or
                        animName:match("right") then
                        track:Stop()
                    end
                end
            end)

            _G.AnimBlockConnection = connection
        end
    end

    setupAnimationBlocking()

    local function overrideToolActivation()
        local function processTool(tool)
            if tool and (tool.Name == "Punch" or tool.Name:match("Attack") or tool.Name:match("Right")) then
                if not tool:GetAttribute("ActivatedOverride") then
                    tool:SetAttribute("ActivatedOverride", true)

                    local connection = tool.Activated:Connect(function()
                        task.wait(0.05)

                        local char = game.Players.LocalPlayer.Character
                        if char and char:FindFirstChild("Humanoid") then
                            for _, track in pairs(char.Humanoid:GetPlayingAnimationTracks()) do
                                if track.Animation then
                                    local animId = track.Animation.AnimationId
                                    local animName = track.Name:lower()

                                    if blockedAnimations[animId] or
                                        animName:match("punch") or
                                        animName:match("attack") or
                                        animName:match("right") then
                                        track:Stop()
                                    end
                                end
                            end
                        end
                    end)

                    if not _G.ToolConnections then
                        _G.ToolConnections = {}
                    end
                    _G.ToolConnections[tool] = connection
                end
            end
        end

        for _, tool in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
            processTool(tool)
        end

        local char = game.Players.LocalPlayer.Character
        if char then
            for _, tool in pairs(char:GetChildren()) do
                if tool:IsA("Tool") then
                    processTool(tool)
                end
            end
        end

        if not _G.BackpackAddedConnection then
            _G.BackpackAddedConnection = game.Players.LocalPlayer.Backpack.ChildAdded:Connect(function(child)
                if child:IsA("Tool") then
                    task.wait(0.1)
                    processTool(child)
                end
            end)
        end

        if not _G.CharacterToolAddedConnection and char then
            _G.CharacterToolAddedConnection = char.ChildAdded:Connect(function(child)
                if child:IsA("Tool") then
                    task.wait(0.1)
                    processTool(child)
                end
            end)
        end
    end

    overrideToolActivation()

    if not _G.AnimMonitorConnection then
        _G.AnimMonitorConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if tick() % 0.5 < 0.01 then
                local char = game.Players.LocalPlayer.Character
                if char and char:FindFirstChild("Humanoid") then
                    for _, track in pairs(char.Humanoid:GetPlayingAnimationTracks()) do
                        if track.Animation then
                            local animId = track.Animation.AnimationId
                            local animName = track.Name:lower()

                            if blockedAnimations[animId] or
                                animName:match("punch") or
                                animName:match("attack") or
                                animName:match("right") then
                                track:Stop()
                            end
                        end
                    end
                end
            end
        end)
    end

    if not _G.CharacterAddedConnection then
        _G.CharacterAddedConnection = game.Players.LocalPlayer.CharacterAdded:Connect(function(newChar)
            task.wait(1)
            setupAnimationBlocking()
            overrideToolActivation()

            if _G.CharacterToolAddedConnection then
                _G.CharacterToolAddedConnection:Disconnect()
            end

            _G.CharacterToolAddedConnection = newChar.ChildAdded:Connect(function(child)
                if child:IsA("Tool") then
                    task.wait(0.1)
                    processTool(child)
                end
            end)
        end)
    end
end)

function RecoveryPunch()
    if _G.AnimBlockConnection then
        _G.AnimBlockConnection:Disconnect()
        _G.AnimBlockConnection = nil
    end
    if _G.AnimMonitorConnection then
        _G.AnimMonitorConnection:Disconnect()
        _G.AnimMonitorConnection = nil
    end
    if _G.ToolConnections then
        for _, conn in pairs(_G.ToolConnections) do
            if conn then conn:Disconnect() end
        end
        _G.ToolConnections = nil
    end
    if _G.BackpackAddedConnection then
        _G.BackpackAddedConnection:Disconnect()
        _G.BackpackAddedConnection = nil
    end
    if _G.CharacterToolAddedConnection then
        _G.CharacterToolAddedConnection:Disconnect()
        _G.CharacterToolAddedConnection = nil
    end
    if _G.CharacterAddedConnection then
        _G.CharacterAddedConnection:Disconnect()
        _G.CharacterAddedConnection = nil
    end
end

Killer:AddButton("ðŸ”„ Recover Punch Anim", function()
    RecoveryPunch()
end)

Killer:AddSwitch("Auto Equip Punch", function(state)
	autoEquipPunch = state
	task.spawn(function()
		while autoEquipPunch do
			local punch = LocalPlayer.Backpack:FindFirstChild("Punch")
			if punch then
				punch.Parent = LocalPlayer.Character
			end
			task.wait(0.1)
		end
	end)
end)

Killer:AddSwitch("ðŸ¥Š Auto Punch [No Animation]", function(state)
	autoPunchNoAnim = state
	task.spawn(function()
		while autoPunchNoAnim do
			local punch = LocalPlayer.Backpack:FindFirstChild("Punch") or LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Punch")
			if punch then
				if punch.Parent ~= LocalPlayer.Character then
					punch.Parent = LocalPlayer.Character
				end
				LocalPlayer.muscleEvent:FireServer("punch", "rightHand")
				LocalPlayer.muscleEvent:FireServer("punch", "leftHand")
			else
				autoPunchNoAnim = false
			end
			task.wait(0.01)
		end
	end)
end)

Killer:AddSwitch("ðŸ§¨ Auto Punch", function(state)
	_G.fastHitActive = state
	if state then
		task.spawn(function()
			while _G.fastHitActive do
				local punch = LocalPlayer.Backpack:FindFirstChild("Punch")
				if punch then
					punch.Parent = LocalPlayer.Character
					if punch:FindFirstChild("attackTime") then
						punch.attackTime.Value = 0
					end
				end
				task.wait(0.1)
			end
		end)
		task.spawn(function()
			while _G.fastHitActive do
				local punch = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Punch")
				if punch then
					punch:Activate()
				end
				task.wait(0.1)
			end
		end)
	else
		local punch = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Punch")
		if punch then
			punch.Parent = LocalPlayer.Backpack
		end
	end
end)

Killer:AddSwitch("âš¡ Fast Punch", function(state)
	_G.autoPunchActive = state
	if state then
		task.spawn(function()
			while _G.autoPunchActive do
				local punch = LocalPlayer.Backpack:FindFirstChild("Punch")
				if punch then
					punch.Parent = LocalPlayer.Character
					if punch:FindFirstChild("attackTime") then
						punch.attackTime.Value = 0
					end
				end
				task.wait()
			end
		end)
		task.spawn(function()
			while _G.autoPunchActive do
				local punch = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Punch")
				if punch then
					punch:Activate()
				end
				task.wait()
			end
		end)
	else
		local punch = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Punch")
		if punch then
			punch.Parent = LocalPlayer.Backpack
		end
	end
end)

local LocalPlayer = Players.LocalPlayer

local killsShown = false
local killsGui = nil

local showKillsButton = Killer:AddButton("ðŸ“Š Kill Counter UI", function()
	if killsShown then
		if not killsGui then
			killsGui = Instance.new("ScreenGui")
			killsGui.Name = "KillsGui"
			killsGui.ResetOnSpawn = false
			killsGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

			local killsFrame = Instance.new("Frame")
			killsFrame.Size = UDim2.new(0, 180, 0, 55)
			killsFrame.Position = UDim2.new(0.5, -90, 0, 60)
			killsFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
			killsFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
			killsFrame.Active = true
			killsFrame.Draggable = true
			killsFrame.Parent = killsGui

			local titleLabel = Instance.new("TextLabel")
			titleLabel.Size = UDim2.new(1, 0, 0, 20)
			titleLabel.Position = UDim2.new(0, 0, 0, 0)
			titleLabel.BackgroundTransparency = 1
			titleLabel.Text = "Syniox Kill"
			titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
			titleLabel.Font = Enum.Font.SourceSansBold
			titleLabel.TextScaled = true
			titleLabel.Parent = killsFrame

			local killsLabel = Instance.new("TextLabel")
			killsLabel.Size = UDim2.new(1, 0, 0, 35)
			killsLabel.Position = UDim2.new(0, 0, 0, 20)
			killsLabel.BackgroundTransparency = 1
			killsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
			killsLabel.TextScaled = true
			killsLabel.Font = Enum.Font.SourceSansBold
			killsLabel.Parent = killsFrame

			coroutine.wrap(function()
				while killsGui and killsGui.Parent do
					local kills = LocalPlayer:FindFirstChild("leaderstats") and LocalPlayer.leaderstats:FindFirstChild("Kills")
					if kills then
						killsLabel.Text = "Kills: " .. tostring(kills.Value)
					else
						killsLabel.Text = "Kills: 0"
					end
					task.wait(0.2)
				end
			end)()
		else
			killsGui.Enabled = true
		end
	else
		if killsGui then
			killsGui.Enabled = false
		end
	end
end)

showKillsButton.TextColor3 = Color3.fromRGB(255, 255, 255)

Killer:AddLabel("--------------------")
Killer:AddLabel("--- Whitelist System ---")

local whitelistShow = Killer:AddLabel("Whitelisted: None")

local function updateWhitelistLabel()
    local str = ""
    for name, _ in pairs(playerWhitelist) do str = str .. name .. ", " end
    whitelistShow.Text = str ~= "" and "Whitelisted: " .. str:sub(1, #str - 2) or "Whitelisted: None"
end

local whitelistDropdown = Killer:AddDropdown("ðŸ«‚ Whitelist Player", function(name)
    if name then playerWhitelist[name] = true updateWhitelistLabel() end
end)

Killer:AddButton("ðŸ§¹ Clear Whitelist", function()
    playerWhitelist = {} updateWhitelistLabel()
end)

Killer:AddSwitch("ðŸ›¡ï¸ Auto Whitelist Friends", function(state)
    _G.WhFriends = state
    if state then
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and LocalPlayer:IsFriendsWith(p.UserId) then playerWhitelist[p.Name] = true end
        end
        updateWhitelistLabel()
    end
end)

Killer:AddSwitch("âš”ï¸ Auto Kill All (Ignore Whitelist)", function(bool)
    _G.AutoKill = bool
    task.spawn(function()
        while _G.AutoKill do
            local char = LocalPlayer.Character
            local rHand = char and char:FindFirstChild("RightHand")
            if rHand then
                for _, target in ipairs(Players:GetPlayers()) do
                    if target ~= LocalPlayer and not playerWhitelist[target.Name] then
                        local root = target.Character and target.Character:FindFirstChild("HumanoidRootPart")
                        if root then
                            pcall(function()
                                firetouchinterest(rHand, root, 1)
                                firetouchinterest(rHand, root, 0)
                            end)
                        end
                    end
                end
            end
            task.wait(0.05)
        end
    end)
end)

Killer:AddLabel("--------------------")
Killer:AddLabel("--- Blacklist (Target) ---")

local blacklistShow = Killer:AddLabel("Targets: None")

local function updateBlacklistLabel()
    local str = ""
    for _, name in ipairs(targetPlayerNames) do str = str .. name .. ", " end
    blacklistShow.Text = str ~= "" and "Targets: " .. str:sub(1, #str - 2) or "Targets: None"
end

local targetDropdown = Killer:AddDropdown("ðŸŽ­ Select Target", function(name)
    if name and not table.find(targetPlayerNames, name) then 
        table.insert(targetPlayerNames, name) 
        updateBlacklistLabel()
    end
end)

Killer:AddButton("ðŸš« Clear Blacklist", function()
    targetPlayerNames = {} updateBlacklistLabel()
end)

Killer:AddSwitch("ðŸŽ¯ Start Kill Target", function(state)
    _G.KillTarget = state
    task.spawn(function()
        while _G.KillTarget do
            local char = LocalPlayer.Character
            local rHand = char and char:FindFirstChild("RightHand")
            if rHand then
                for _, name in ipairs(targetPlayerNames) do
                    local t = Players:FindFirstChild(name)
                    if t and t.Character and t.Character:FindFirstChild("HumanoidRootPart") then
                        pcall(function()
                            firetouchinterest(rHand, t.Character.HumanoidRootPart, 1)
                            firetouchinterest(rHand, t.Character.HumanoidRootPart, 0)
                        end)
                    end
                end
            end
            task.wait(0.05)
        end
    end)
end)

local function updateAllDropdowns(p)
    if p ~= LocalPlayer then
        whitelistDropdown:Add(p.Name)
        targetDropdown:Add(p.Name)
    end
end

for _, p in ipairs(Players:GetPlayers()) do updateAllDropdowns(p) end
Players.PlayerAdded:Connect(updateAllDropdowns)

local LookDura = window:AddTab("Stats")
local SelectPlayerName = ""

local StatsFolder = LookDura:AddFolder(" ðŸ‘¤ Stats V2")

local PlayerDrop = StatsFolder:AddDropdown("Select Player", function(Value)
    SelectPlayerName = Value:match("| (.+)")
end)

for _, Plr in pairs(game:GetService("Players"):GetPlayers()) do
    PlayerDrop:Add(Plr.DisplayName .. " | " .. Plr.Name)
end

game:GetService("Players").PlayerAdded:Connect(function(Plr)
    PlayerDrop:Add(Plr.DisplayName .. " | " .. Plr.Name)
end)

local function FormatNumberWithCommas(number)
    local formatted = tostring(number):reverse():gsub("(%d%d%d)", "%1,"):reverse()
    return formatted:gsub("^,", "")
end

local function FormatAbbreviated(number)
    local abbreviations = {"", "K", "M", "B", "T", "Qa", "Qi"}
    local abbreviationIndex = 1
    while number >= 1000 and abbreviationIndex < #abbreviations do
        number = number / 1000
        abbreviationIndex = abbreviationIndex + 1
    end
    return string.format("%.2f", number) .. abbreviations[abbreviationIndex]
end

local function FormatDisplay(value)
    local normal = FormatNumberWithCommas(value)
    local abbreviated = FormatAbbreviated(value)
    return "[ " .. normal .. " | " .. abbreviated .. " ]"
end

local Update = StatsFolder:AddLabel("ðŸ’ª Strength: -")
local Update1 = StatsFolder:AddLabel("ðŸ’Ž Gems: -")
local Update2 = StatsFolder:AddLabel("ðŸ”„ Rebirths: -")
local Update3 = StatsFolder:AddLabel("âš¡ Agility: -")
local Update4 = StatsFolder:AddLabel("ðŸ›¡ï¸ Durability: -")
local Update5 = StatsFolder:AddLabel("ðŸ’€ Kills: -")
local Update9 = StatsFolder:AddLabel("ðŸ“ Current Map: -")

StatsFolder:AddLabel("------------------------------")
local EnemyHealthLabel = StatsFolder:AddLabel("Target Health: 0 / 0")
local MyDamageLabel = StatsFolder:AddLabel("Your Damage: 0")
local FinalHTKLabel = StatsFolder:AddLabel("Hits To Kill: 0")
StatsFolder:AddLabel("------------------------------")
StatsFolder:AddLabel("ðŸ¾ Equipped Pets:")
local PetLabels = {}
for i = 1, 8 do
    PetLabels[i] = StatsFolder:AddLabel(i .. ". Empty")
end
StatsFolder:AddLabel("------------------------------")

task.spawn(function()
    while task.wait(0.5) do
        if SelectPlayerName ~= "" then
            local player = game.Players:FindFirstChild(SelectPlayerName)
            local localPlayer = game.Players.LocalPlayer
            
            if player and player.Parent and localPlayer then
                if player:FindFirstChild("Gems") then Update1.Text = "ðŸ’Ž Gems: " .. FormatDisplay(player.Gems.Value) end
                if player:FindFirstChild("Agility") then Update3.Text = "âš¡ Agility: " .. FormatDisplay(player.Agility.Value) end
                if player:FindFirstChild("Durability") then Update4.Text = "ðŸ›¡ï¸ Durability: " .. FormatDisplay(player.Durability.Value) end
                if player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Kills") then Update5.Text = "ðŸ’€ Kills: " .. FormatDisplay(player.leaderstats.Kills.Value) end
                if player:FindFirstChild("currentMap") then Update9.Text = "ðŸ“ Current Map: " .. tostring(player.currentMap.Value) end
                
                local leaderstats = player:FindFirstChild("leaderstats")
                if leaderstats then
                    if leaderstats:FindFirstChild("Strength") then Update.Text = "ðŸ’ª Strength: " .. FormatDisplay(leaderstats.Strength.Value) end
                    if leaderstats:FindFirstChild("Rebirths") then Update2.Text = "ðŸ”„ Rebirths: " .. FormatDisplay(leaderstats.Rebirths.Value) end
                end

                local equippedPets = {}
                local petFolder = player:FindFirstChild("petFolder")
                if petFolder then
                    for _, folder in pairs(petFolder:GetChildren()) do
                        for _, pet in pairs(folder:GetChildren()) do
                            if pet:FindFirstChild("equipped") and pet.equipped.Value == true then
                                table.insert(equippedPets, pet.Name)
                            end
                        end
                    end
                end

                for i = 1, 8 do
                    if equippedPets[i] then
                        PetLabels[i].Text = i .. ". ðŸ¾ " .. equippedPets[i]
                    else
                        PetLabels[i].Text = i .. ". Empty"
                    end
                end

                local char = player.Character
                local myStr = (localPlayer:FindFirstChild("leaderstats") and localPlayer.leaderstats:FindFirstChild("Strength") and localPlayer.leaderstats.Strength.Value) or 1
                if char and char:FindFirstChild("Humanoid") then
                    local currentHP = math.floor(char.Humanoid.Health)
                    local maxHP = math.floor(char.Humanoid.MaxHealth)
                    EnemyHealthLabel.Text = "Target Health: [ " .. FormatNumberWithCommas(currentHP) .. " / " .. FormatNumberWithCommas(maxHP) .. " ]"
                    MyDamageLabel.Text = "Your Damage: " .. FormatAbbreviated(myStr)
                    local htkCalc = math.ceil(currentHP / myStr)
                    if currentHP <= 0 then
                        FinalHTKLabel.Text = "Hits To Kill: DEAD"
                    else
                        FinalHTKLabel.Text = "Hits To Kill: " .. FormatNumberWithCommas(htkCalc)
                    end
                end
            end
        end
    end
end)

local SpyFolder = LookDura:AddFolder(" ðŸ“Š Spy Stats")
local SelectPlayerName = ""

local statsHistory = {Strength = {}, Rebirth = {}, Durability = {}}
local initialStats = {Strength = nil, Rebirth = nil, Durability = nil}
local offsets = {Strength = 0, Durability = 0}
local lastRaw = {Strength = 0, Durability = 0}

local PlayerDrop = SpyFolder:AddDropdown("Select Player", function(Value)
    SelectPlayerName = Value:match("| (.+)")
    statsHistory = {Strength = {}, Rebirth = {}, Durability = {}}
    initialStats = {Strength = nil, Rebirth = nil, Durability = nil}
    offsets = {Strength = 0, Durability = 0}
    lastRaw = {Strength = 0, Durability = 0}
end)

for _, Plr in pairs(game:GetService("Players"):GetPlayers()) do
    PlayerDrop:Add(Plr.DisplayName .. " | " .. Plr.Name)
end

game:GetService("Players").PlayerAdded:Connect(function(Plr)
    PlayerDrop:Add(Plr.DisplayName .. " | " .. Plr.Name)
end)

local function FormatAbbreviated(number)
    local absNum = math.abs(number)
    if absNum >= 1e15 then return string.format("%.2fQa", number/1e15) end
    if absNum >= 1e12 then return string.format("%.2fT", number/1e12) end
    if absNum >= 1e9 then return string.format("%.2fB", number/1e9) end
    if absNum >= 1e6 then return string.format("%.2fM", number/1e6) end
    if absNum >= 1e3 then return string.format("%.2fK", number/1e3) end
    return string.format("%.2f", number)
end

local function GetStatPace(history)
    if #history >= 2 then
        local deltaValue = history[#history].value - history[1].value
        local deltaTime = history[#history].time - history[1].time
        if deltaTime <= 0 then return 0 end
        return deltaValue / deltaTime
    end
    return 0
end

local UpdateStrength = SpyFolder:AddLabel("ðŸ’ª Total Strength: -")
local UpdateStrengthPace = SpyFolder:AddLabel("ðŸ“ˆ Strength: -/Hr | -/Day | -/Week")
SpyFolder:AddLabel("------------------------------")
local UpdateDurability = SpyFolder:AddLabel("ðŸ›¡ï¸ Total Durability: -")
local UpdateDurabilityPace = SpyFolder:AddLabel("ðŸ“ˆ Durability: -/Hr | -/Day | -/Week")
SpyFolder:AddLabel("------------------------------")
local UpdateRebirth = SpyFolder:AddLabel("ðŸ”„ Rebirth: -")
local UpdateRebirthPace = SpyFolder:AddLabel("ðŸ“ˆ Rebirth: -/Hr | -/Day | -/Week")

task.spawn(function()
    while task.wait(1) do
        if SelectPlayerName ~= "" then
            local player = game.Players:FindFirstChild(SelectPlayerName)
            if player and player:FindFirstChild("leaderstats") then
                local lStats = player.leaderstats
                local strStat = lStats:FindFirstChild("Strength")
                local rbStat = lStats:FindFirstChild("Rebirths")
                local duraStat = player:FindFirstChild("Durability")

                local toProcess = {
                    {Stat = strStat, Name = "Strength", Label = UpdateStrength, PaceLabel = UpdateStrengthPace, Icon = "ðŸ’ª", IsAccumulated = true},
                    {Stat = duraStat, Name = "Durability", Label = UpdateDurability, PaceLabel = UpdateDurabilityPace, Icon = "ðŸ›¡ï¸", IsAccumulated = true},
                    {Stat = rbStat, Name = "Rebirth", Label = UpdateRebirth, PaceLabel = UpdateRebirthPace, Icon = "ðŸ”„", IsAccumulated = false}
                }

                for _, data in ipairs(toProcess) do
                    if data.Stat then
                        local rawValue = data.Stat.Value
                        if initialStats[data.Name] == nil then initialStats[data.Name] = rawValue end

                        local displayValue = rawValue
                        if data.IsAccumulated then
                            if rawValue < lastRaw[data.Name] then
                                offsets[data.Name] = offsets[data.Name] + lastRaw[data.Name]
                            end
                            lastRaw[data.Name] = rawValue
                            displayValue = rawValue + offsets[data.Name]
                        end

                        table.insert(statsHistory[data.Name], {time = tick(), value = displayValue})
                        while #statsHistory[data.Name] > 0 and tick() - statsHistory[data.Name][1].time > 10 do
                            table.remove(statsHistory[data.Name], 1)
                        end

                        local pace = GetStatPace(statsHistory[data.Name])
                        local gained = displayValue - initialStats[data.Name]
                        
                        data.Label.Text = string.format("%s Total %s: %s (Gained: %s)", data.Icon, data.Name, FormatAbbreviated(displayValue), FormatAbbreviated(gained))
                        data.PaceLabel.Text = string.format("ðŸ“ˆ %s: %s/Hr | %s/Day | %s/Week", data.Name, FormatAbbreviated(pace * 3600), FormatAbbreviated(pace * 86400), FormatAbbreviated(pace * 604800))
                    end
                end
            end
        end
    end
end)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

local Gift = window:AddTab("Gift")

Gift:AddLabel("ðŸ¥š Gifting Protein egg:").TextSize = 22
local proteinEggLabel = Gift:AddLabel("Protein Eggs: 0")
proteinEggLabel.TextSize = 20

local selectedEggPlayer = nil
local eggCount = 0

local eggDropdown = Gift:AddDropdown("Select Player", function(selectedDisplayName)
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr.DisplayName == selectedDisplayName then
            selectedEggPlayer = plr
            break
        end
    end
end)

local function refreshEggDropdown()
    if eggDropdown.Clear then eggDropdown:Clear() end
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer then
            eggDropdown:Add(plr.DisplayName)
        end
    end
end

refreshEggDropdown()
Players.PlayerAdded:Connect(refreshEggDropdown)
Players.PlayerRemoving:Connect(refreshEggDropdown)

Gift:AddTextBox("Amount of Eggs", function(text)
    eggCount = tonumber(text) or 0
end)

Gift:AddButton("ðŸ¥š Gift Eggs", function()
    if selectedEggPlayer and eggCount > 0 then
        for i = 1, eggCount do
            local egg = (LocalPlayer:FindFirstChild("consumablesFolder") and LocalPlayer.consumablesFolder:FindFirstChild("Protein Egg")) or LocalPlayer.Backpack:FindFirstChild("Protein Egg")
            if egg then
                ReplicatedStorage.rEvents.giftRemote:InvokeServer("giftRequest", selectedEggPlayer, egg)
                task.wait(0.1)
            else
                break
            end
        end
    end
end)

Gift:AddLabel("ðŸ Gifting Tropical Shakes:").TextSize = 22
local tropicalShakeLabel = Gift:AddLabel("Tropical Shakes: 0")
tropicalShakeLabel.TextSize = 18

local selectedShakePlayer = nil
local shakeCount = 0

local shakeDropdown = Gift:AddDropdown("Select Player", function(selectedDisplayName)
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr.DisplayName == selectedDisplayName then
            selectedShakePlayer = plr
            break
        end
    end
end)

local function refreshShakeDropdown()
    if shakeDropdown.Clear then shakeDropdown:Clear() end
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer then
            shakeDropdown:Add(plr.DisplayName)
        end
    end
end

refreshShakeDropdown()
Players.PlayerAdded:Connect(refreshShakeDropdown)
Players.PlayerRemoving:Connect(refreshShakeDropdown)

Gift:AddTextBox("Tropical Shakes gift", function(text)
    shakeCount = tonumber(text) or 0
end)

Gift:AddButton("Gift Tropical Shakes", function()
    if selectedShakePlayer and shakeCount > 0 then
        for i = 1, shakeCount do
            local shake = (LocalPlayer:FindFirstChild("consumablesFolder") and LocalPlayer.consumablesFolder:FindFirstChild("Tropical Shake")) or LocalPlayer.Backpack:FindFirstChild("Tropical Shake")
            if shake then
                ReplicatedStorage.rEvents.giftRemote:InvokeServer("giftRequest", selectedShakePlayer, shake)
                task.wait(0.1)
            else
                break
            end
        end
    end
end)

local function updateItemCount()
    local pEggCount = 0
    local tShakeCount = 0
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    local folder = LocalPlayer:FindFirstChild("consumablesFolder")
    
    local allItems = {}
    if backpack then for _, v in pairs(backpack:GetChildren()) do table.insert(allItems, v) end end
    if folder then for _, v in pairs(folder:GetChildren()) do table.insert(allItems, v) end end

    for _, item in ipairs(allItems) do
        if item.Name == "Protein Egg" then
            pEggCount = pEggCount + 1
        elseif item.Name == "Tropical Shake" or item.Name:find("nas") then
            tShakeCount = tShakeCount + 1
        end
    end

    proteinEggLabel.Text = "Protein Eggs: " .. pEggCount
    tropicalShakeLabel.Text = "Tropical Shakes: " .. tShakeCount
end

task.spawn(function()
    while true do
        updateItemCount()
        task.wait(0.5)
    end
end)

