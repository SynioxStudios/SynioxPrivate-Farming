local Players = game:GetService("Players")
local player = Players.LocalPlayer
local VirtualInputManager = game:GetService("VirtualInputManager")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local muscleEvent = player:WaitForChild("muscleEvent")
local leaderstats = player:WaitForChild("leaderstats")
local rebirthsStat = leaderstats:WaitForChild("Rebirths")
local rEvents = ReplicatedStorage:WaitForChild("rEvents")

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/SynioxStudios/ByYusufGui-Syniox/refs/heads/main/SynioxGui.txt", true))()
local displayName = player.DisplayName

local window = library:AddWindow("Syniox Paid | Muscle Legends || HELLO - ".. displayName, {
    title_bar = {Color3.fromRGB(160, 0, 0), Color3.fromRGB(40, 0, 0), Color3.fromRGB(0, 0, 0)}, 
    title_bar_transparency = 0.1, 
    background = {Color3.fromRGB(0, 0, 0), Color3.fromRGB(10, 10, 10), Color3.fromRGB(20, 20, 20)}, 
    background_transparency = 0.1, 
    main_color = Color3.fromRGB(160, 0, 0), 
    min_size = Vector2.new(450, 450), 
    can_resize = true 
})

local RebTab = window:AddTab("Fast Rebirth")

local isRunning = false
local startTime = 0
local totalElapsed = 0
local initialRebirths = rebirthsStat.Value
local lastRebirthTime = tick()
local lastRebirthValue = rebirthsStat.Value
local rebirthCount = 0

local paceHistoryHour, paceHistoryDay, paceHistoryWeek = {}, {}, {}
local maxHistoryLength = 20

local function formatNumber(num)
    if num >= 1e15 then return string.format("%.2fQ", num/1e15) end
    if num >= 1e12 then return string.format("%.2fT", num/1e12) end
    if num >= 1e9 then return string.format("%.2fB", num/1e9) end
    if num >= 1e6 then return string.format("%.2fM", num/1e6) end
    if num >= 1e3 then return string.format("%.2fK", num/1e3) end
    return string.format("%.0f", num)
end

local function unequipAllPets()
    if player:FindFirstChild("petsFolder") then
        for _, folder in pairs(player.petsFolder:GetChildren()) do
            for _, pet in pairs(folder:GetChildren()) do
                rEvents.equipPetEvent:FireServer("unequipPet", pet)
            end
        end
    end
end

local function equipUniquePet(name)
    if player:FindFirstChild("petsFolder") and player.petsFolder:FindFirstChild("Unique") then
        for _, pet in pairs(player.petsFolder.Unique:GetChildren()) do
            if pet.Name == name then
                rEvents.equipPetEvent:FireServer("equipPet", pet)
                task.wait(0.01) 
            end
        end
    end
end

local function findMachine(machineName)
    local machine = workspace:FindFirstChild("machinesFolder") and workspace.machinesFolder:FindFirstChild(machineName)
    if not machine then
        for _, f in pairs(workspace:GetChildren()) do
            if f:IsA("Folder") and f.Name:find("machines") then
                machine = f:FindFirstChild(machineName)
                if machine then break end
            end
        end
    end
    return machine
end

local function pressE()
    VirtualInputManager:SendKeyEvent(true, "E", false, game)
    task.wait(0.05)
    VirtualInputManager:SendKeyEvent(false, "E", false, game)
end

local timeLabel = RebTab:AddLabel("0d 0h 0m 0s - Paused")
timeLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
local paceLabel = RebTab:AddLabel("Pace: 0 / Hour | 0 / Day | 0 / Week")
local averagePaceLabel = RebTab:AddLabel("Average Pace: 0 / Hour | 0 / Day | 0 / Week")
local rebirthsStatsLabel = RebTab:AddLabel("Rebirths: "..formatNumber(rebirthsStat.Value).." | Gained: 0")

local function updateUI()
    local currentTime = tick()
    local elapsed = isRunning and (currentTime - startTime + totalElapsed) or totalElapsed
    local days = math.floor(elapsed / 86400)
    local hours = math.floor((elapsed % 86400) / 3600)
    local minutes = math.floor((elapsed % 3600) / 60)
    local seconds = math.floor(elapsed % 60)
    
    timeLabel.Text = string.format("%dd %dh %dm %ds - %s", days, hours, minutes, seconds, isRunning and "Rebirthing" or "Paused")
    timeLabel.TextColor3 = isRunning and Color3.fromRGB(50, 255, 50) or Color3.fromRGB(255, 50, 50)
end

local function calculatePaceOnRebirth()
    rebirthCount = rebirthCount + 1
    if rebirthCount < 2 then
        lastRebirthTime, lastRebirthValue = tick(), rebirthsStat.Value
        return
    end
    local now = tick()
    local gained = rebirthsStat.Value - lastRebirthValue
    if gained > 0 then
        local avgTime = (now - lastRebirthTime) / gained
        local pH, pD, pW = 3600/avgTime, 86400/avgTime, 604800/avgTime
        paceLabel.Text = string.format("Pace: %s/H | %s/D | %s/W", formatNumber(pH), formatNumber(pD), formatNumber(pW))
        table.insert(paceHistoryHour, pH)
        table.insert(paceHistoryDay, pD)
        table.insert(paceHistoryWeek, pW)
        if #paceHistoryHour > maxHistoryLength then
            table.remove(paceHistoryHour, 1) table.remove(paceHistoryDay, 1) table.remove(paceHistoryWeek, 1)
        end
        local function avg(tbl)
            local s = 0 for _, v in ipairs(tbl) do s = s + v end
            return #tbl > 0 and (s / #tbl) or 0
        end
        averagePaceLabel.Text = string.format("Avg Pace: %s/H | %s/D | %s/W", formatNumber(avg(paceHistoryHour)), formatNumber(avg(paceHistoryDay)), formatNumber(avg(paceHistoryWeek)))
        lastRebirthTime, lastRebirthValue = now, rebirthsStat.Value
    end
end

RebTab:AddLabel("")
RebTab:AddLabel("‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ")

RebTab:AddSwitch("üîÑ Auto Rebirth Farm", function(state)
    isRunning = state
    if state then
        startTime = tick()
        task.spawn(function()
            while isRunning do
                local cReb = rebirthsStat.Value
                local cost = 10000 + (5000 * cReb)
                if player.ultimatesFolder:FindFirstChild("Golden Rebirth") then
                    cost = math.floor(cost * (1 - (player.ultimatesFolder["Golden Rebirth"].Value * 0.1)))
                end
                unequipAllPets()
                task.wait(0.1)
                equipUniquePet("Swift Samurai")
                while isRunning and player.leaderstats.Strength.Value < cost do
                    for i = 1, 12 do muscleEvent:FireServer("rep") end
                    task.wait(0.01)
                end
                if not isRunning then break end
                unequipAllPets()
                task.wait(0.1)
                equipUniquePet("Tribal Overlord")
                local machine = findMachine("Jungle Bar Lift")
                if machine and machine:FindFirstChild("interactSeat") then
                    player.Character.HumanoidRootPart.CFrame = machine.interactSeat.CFrame * CFrame.new(0, 3, 0)
                    local r = 0 repeat task.wait(0.2) pressE() r = r + 1 until (player.Character and player.Character.Humanoid.Sit) or r > 20 or not isRunning
                end
                local b = rebirthsStat.Value
                repeat rEvents.rebirthRemote:InvokeServer("rebirthRequest") task.wait(0.5) until rebirthsStat.Value > b or not isRunning
            end
        end)
    else
        totalElapsed = totalElapsed + (tick() - startTime)
    end
end)

rebirthsStat:GetPropertyChangedSignal("Value"):Connect(function()
    calculatePaceOnRebirth()
    rebirthsStatsLabel.Text = string.format("Rebirths: %s | Gained: %s", formatNumber(rebirthsStat.Value), formatNumber(rebirthsStat.Value - initialRebirths))
end)

task.spawn(function()
    while true do updateUI() task.wait(1) end
end)

RebTab:AddButton("üèãÔ∏è‚Äç‚ôÇÔ∏è Jungle Lift", function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(-8666, 34, 2070)
        task.wait(0.5)
        local machine = findMachine("Jungle Bar Lift")
        if machine and machine:FindFirstChild("interactSeat") then
            local retryCount = 0
            repeat
                task.wait(0.2)
                pressE()
                retryCount = retryCount + 1
            until (player.Character and player.Character.Humanoid.Sit) or retryCount > 10
        end
    end
end)

RebTab:AddLabel("üëæ Performance").TextSize = 21

RebTab:AddButton("üè¥ Full FPS Boost", function()
    local lighting = game:GetService("Lighting")
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("ParticleEmitter") or obj:IsA("PointLight") or obj:IsA("SpotLight") then
            obj:Destroy()
        end
    end
    lighting.Brightness = 0
    lighting.OutdoorAmbient = Color3.new(0, 0, 0)
    for _, v in pairs(lighting:GetChildren()) do if v:IsA("Sky") then v:Destroy() end end
end)

RebTab:AddSwitch("üëÅÔ∏è‚Äçüó®Ô∏è Hide All Frames", function(state)
    for _, obj in pairs(game:GetService("ReplicatedStorage"):GetChildren()) do
        if obj.Name:match("Frame$") then obj.Visible = not state end
    end
end)

RebTab:AddSwitch("üé∞ Auto Fortune Wheel", function(Value)
    _G.autoFortuneWheelActive = Value
    if Value then
        local function openFortuneWheel()
            while _G.autoFortuneWheelActive do
                local args = {
                    [1] = "openFortuneWheel",
                    [2] = game:GetService("ReplicatedStorage"):WaitForChild("fortuneWheelChances"):WaitForChild("Fortune Wheel")
                }
                game:GetService("ReplicatedStorage"):WaitForChild("rEvents"):WaitForChild("openFortuneWheelRemote"):InvokeServer(unpack(args))
                wait(0)
            end
        end
        coroutine.wrap(openFortuneWheel)()
    else
        _G.autoFortuneWheelActive = false
    end
end)

local StrTab = window:AddTab("Fast Strength")

local strengthStat = leaderstats:WaitForChild("Strength")
local durabilityStat = player:WaitForChild("Durability")
local runFastRep = false
local repsPerTick = 1 
local initialStrength = strengthStat.Value
local initialDurability = durabilityStat.Value
local strengthHistory = {}
local calculationInterval = 10

local function formatNumber(number)
    local isNegative = number < 0
    number = math.abs(number)
    if number >= 1e15 then return (isNegative and "-" or "") .. string.format("%.2fQa", number / 1e15)
    elseif number >= 1e12 then return (isNegative and "-" or "") .. string.format("%.2fT", number / 1e12)
    elseif number >= 1e9 then return (isNegative and "-" or "") .. string.format("%.2fB", number / 1e9)
    elseif number >= 1e6 then return (isNegative and "-" or "") .. string.format("%.2fM", number / 1e6)
    elseif number >= 1e3 then return (isNegative and "-" or "") .. string.format("%.2fK", number / 1e3)
    else return (isNegative and "-" or "") .. string.format("%.0f", number) end
end

local function getPing()
    local stats = game:GetService("Stats")
    local pingStat = stats:FindFirstChild("PerformanceStats") and stats.PerformanceStats:FindFirstChild("Ping")
    return pingStat and pingStat:GetValue() or 0
end

StrTab:AddLabel("Session Stats")
local strengthLabel = StrTab:AddLabel("Strength: 0 | Gained: 0")
local sPaceLabel = StrTab:AddLabel("Strength Pace: 0/H | 0/D")
local durabilityLabel = StrTab:AddLabel("Durability: 0 | Gained: 0")

StrTab:AddLabel("Settings")

StrTab:AddTextBox("Rep Speed", function(value)
    local num = tonumber(value)
    if num and num > 0 then
        repsPerTick = math.floor(num)
    end
end, {
    placeholder = "1",
})

local function fastRepLoop()
    while runFastRep do
        local startTick = tick()
        while tick() - startTick < 0.75 and runFastRep do
            if getPing() < 350 then
                for i = 1, repsPerTick do
                    muscleEvent:FireServer("rep")
                end
            end
            task.wait(0.02)
        end
        while runFastRep and getPing() >= 350 do
            task.wait(1)
        end
    end
end

StrTab:AddSwitch("üí¢ Auto Strength Farm", function(state)
    runFastRep = state
    if state then
        unequipAllPets()
        task.wait(0.1)
        equipUniquePet("Swift Samurai")
        task.spawn(fastRepLoop)
    end
end)

task.spawn(function()
    local lastCalcTime = tick()
    while true do
        local currentStrength = strengthStat.Value
        local currentDurability = durabilityStat.Value
        strengthLabel.Text = "Strength: " .. formatNumber(currentStrength) .. " | Gained: " .. formatNumber(currentStrength - initialStrength)
        durabilityLabel.Text = "Durability: " .. formatNumber(currentDurability) .. " | Gained: " .. formatNumber(currentDurability - initialDurability)

        if runFastRep then
            local currentTime = tick()
            table.insert(strengthHistory, {time = currentTime, value = currentStrength})
            while #strengthHistory > 0 and currentTime - strengthHistory[1].time > calculationInterval do
                table.remove(strengthHistory, 1)
            end
            if currentTime - lastCalcTime >= calculationInterval and #strengthHistory >= 2 then
                lastCalcTime = currentTime
                local delta = strengthHistory[#strengthHistory].value - strengthHistory[1].value
                local perSec = delta / calculationInterval
                sPaceLabel.Text = string.format("Strength Pace: %s/Hour | %s/Day", formatNumber(perSec * 3600), formatNumber(perSec * 86400))
            end
        end
        task.wait(0.1)
    end
end)

StrTab:AddLabel("Machines")

StrTab:AddButton("ü¶µ Jungle Squat", function()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(-8377.55, 48.71, 2864.90)
        task.wait(0.5)
        local machine = findMachine("Jungle Squat Rack") or findMachine("Squat Rack")
        if machine and machine:FindFirstChild("interactSeat") then
            local retry = 0
            repeat
                task.wait(0.2)
                pressE()
                retry = retry + 1
            until (player.Character and player.Character.Humanoid.Sit) or retry > 10
        end
    end
end)
